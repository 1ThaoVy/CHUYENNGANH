<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Orianna Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { primary: '#06B6D4' } } }
        }
    </script>
</head>
<body class="bg-gray-100">
    <!-- Admin Navbar -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-8">
                    <h1 class="text-2xl font-bold text-primary">Admin Dashboard</h1>
                    <div class="hidden md:flex space-x-6">
                        <a href="index.html" class="text-primary font-semibold">T·ªïng quan</a>
                        <a href="products.html" class="text-gray-700 hover:text-primary">S·∫£n ph·∫©m</a>
                        <a href="orders.html" class="text-gray-700 hover:text-primary">ƒê∆°n h√†ng</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="admin-name" class="text-gray-700"></span>
                    <a href="../index.html" class="text-gray-700 hover:text-primary">V·ªÅ trang ch·ªß</a>
                    <button onclick="logout()" class="text-red-600 hover:text-red-700">ƒêƒÉng xu·∫•t</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">T·ªïng s·∫£n ph·∫©m</p>
                        <p id="total-products" class="text-3xl font-bold text-primary">0</p>
                    </div>
                    <div class="text-4xl">üì¶</div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">ƒê∆°n h√†ng m·ªõi</p>
                        <p id="new-orders" class="text-3xl font-bold text-yellow-500">0</p>
                    </div>
                    <div class="text-4xl">üõí</div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">ƒê∆°n ho√†n th√†nh</p>
                        <p id="completed-orders" class="text-3xl font-bold text-green-500">0</p>
                    </div>
                    <div class="text-4xl">‚úÖ</div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Doanh thu</p>
                        <p id="revenue" class="text-3xl font-bold text-primary">0ƒë</p>
                    </div>
                    <div class="text-4xl">üí∞</div>
                </div>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h2>
            <div id="recent-orders" class="overflow-x-auto">
                <p class="text-gray-500">ƒêang t·∫£i...</p>
            </div>
        </div>
    </div>

    <script src="../js/config.js"></script>
    <script>
        // Check admin auth
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        if (!user || user.vai_tro !== 'admin') {
            alert('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!');
            window.location.href = '../index.html';
        }

        document.getElementById('admin-name').textContent = user.ho_ten;

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '../index.html';
        }

        // Load dashboard data
        async function loadDashboard() {
            try {
                // Load products count
                const productsRes = await apiCall('/products?limit=1');
                document.getElementById('total-products').textContent = productsRes.pagination.total;

                // Load orders (simplified - you may need to add admin endpoints)
                // For now, showing placeholder data
                document.getElementById('new-orders').textContent = '5';
                document.getElementById('completed-orders').textContent = '23';
                document.getElementById('revenue').textContent = '125,000,000ƒë';

                // Recent orders placeholder
                document.getElementById('recent-orders').innerHTML = `
                    <table class="min-w-full">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left py-2">M√£ ƒêH</th>
                                <th class="text-left py-2">Kh√°ch h√†ng</th>
                                <th class="text-left py-2">T·ªïng ti·ªÅn</th>
                                <th class="text-left py-2">Tr·∫°ng th√°i</th>
                                <th class="text-left py-2">Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="py-2">#001</td>
                                <td class="py-2">Nguy·ªÖn VƒÉn A</td>
                                <td class="py-2">4,500,000ƒë</td>
                                <td class="py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">Ch·ªù x·ª≠ l√Ω</span></td>
                                <td class="py-2"><a href="orders.html" class="text-primary hover:underline">Xem</a></td>
                            </tr>
                        </tbody>
                    </table>
                `;
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        loadDashboard();
    </script>
</body>
</html>
