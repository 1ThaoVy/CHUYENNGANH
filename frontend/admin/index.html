<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Orianna Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { primary: '#06B6D4' } } }
        }
    </script>
</head>
<body class="bg-gray-100 flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 text-white min-h-screen flex flex-col">
        <div class="p-6">
            <div class="flex items-center space-x-3 mb-8">
                <img src="http://localhost:3001/images/logo.png?v=2" alt="Logo" class="h-10 w-10 rounded-full">
                <div>
                    <h2 class="text-xl font-bold">Orianna Admin</h2>
                    <p class="text-gray-400 text-sm">Qu·∫£n tr·ªã vi√™n</p>
                </div>
            </div>
        </div>
        
        <nav class="px-4 pb-4 flex-1 flex flex-col">
            <div class="space-y-1">
                <a href="index.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg bg-primary text-white mb-2">
                    <span class="text-xl">ÔøΩ<</span>
                    <span>T·ªïng quan</span>
                </a>
                <a href="manage-products.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">ÔøΩ</span>
                    <span>S·∫£n ph·∫©m</span>
                </a>
                <a href="orders.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">üõí</span>
                    <span>ƒê∆°n h√†ng</span>
                </a>
                <a href="manage-categories.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">üè∑Ô∏è</span>
                    <span>Danh m·ª•c</span>
                </a>
                <a href="manage-news.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">üì∞</span>
                    <span>Tin t·ª©c</span>
                </a>
                <a href="manage-flash-sale.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">‚ö°</span>
                    <span>Flash Sale</span>
                </a>
                <a href="customers.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">üë•</span>
                    <span>Kh√°ch h√†ng</span>
                </a>
                <a href="settings.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">‚öôÔ∏è</span>
                    <span>C√†i ƒë·∫∑t</span>
                </a>
                <a href="../index.html" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 mb-2">
                    <span class="text-xl">üè†</span>
                    <span>V·ªÅ trang ch·ªß</span>
                </a>
                <button onclick="logout()" class="flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-700 w-full text-left">
                    <span class="text-xl">üö™</span>
                    <span>ƒêƒÉng xu·∫•t</span>
                </button>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
        <!-- Top Navigation -->
        <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">Dashboard</h1>
                    <p class="text-gray-600 text-sm">T·ªïng quan h·ªá th·ªëng</p>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-gray-600">Xin ch√†o, <span id="admin-name" class="font-medium">Admin</span></span>
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-bold">
                        A
                    </div>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main class="flex-1 p-6">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm font-medium">T·ªïng s·∫£n ph·∫©m</p>
                            <p id="total-products" class="text-3xl font-bold text-gray-800 mt-2">0</p>
                        </div>
                        <div class="text-5xl">üì¶</div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">‚Üë 12% so v·ªõi th√°ng tr∆∞·ªõc</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-yellow-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm font-medium">ƒê∆°n h√†ng m·ªõi</p>
                            <p id="new-orders" class="text-3xl font-bold text-gray-800 mt-2">0</p>
                        </div>
                        <div class="text-5xl">üõí</div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">C·∫ßn x·ª≠ l√Ω</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm font-medium">Doanh thu th√°ng</p>
                            <p id="revenue" class="text-3xl font-bold text-gray-800 mt-2">0ƒë</p>
                        </div>
                        <div class="text-5xl">üí∞</div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">‚Üë 8% so v·ªõi th√°ng tr∆∞·ªõc</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm font-medium">Kh√°ch h√†ng</p>
                            <p id="total-customers" class="text-3xl font-bold text-gray-800 mt-2">0</p>
                        </div>
                        <div class="text-5xl">üë•</div>
                    </div>
                    <p class="text-sm text-gray-500 mt-4">T·ªïng s·ªë ƒëƒÉng k√Ω</p>
                </div>
            </div>

            <!-- Recent Orders -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-bold mb-4">ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h3>
                <div id="recent-orders" class="overflow-x-auto">
                    <p class="text-gray-500">ƒêang t·∫£i...</p>
                </div>
                <a href="orders.html" class="block text-center text-primary hover:underline mt-4">
                    Xem t·∫•t c·∫£ ‚Üí
                </a>
            </div>
        </main>
    </div>

    <script src="../js/config.js"></script>
    <script>
        // Check admin auth
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        if (!user || user.vai_tro !== 'admin') {
            alert('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!');
            window.location.href = '../index.html';
        }

        document.getElementById('admin-name').textContent = user.ho_ten;

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '../index.html';
        }

        // Load dashboard data
        async function loadDashboard() {
            try {
                // Load products count
                const productsRes = await apiCall('/products?limit=1');
                document.getElementById('total-products').textContent = productsRes.pagination.total;

                // Load orders (simplified - you may need to add admin endpoints)
                // For now, showing placeholder data
                document.getElementById('new-orders').textContent = '5';
                document.getElementById('completed-orders').textContent = '23';
                document.getElementById('revenue').textContent = '125,000,000ƒë';

                // Recent orders placeholder
                document.getElementById('recent-orders').innerHTML = `
                    <table class="min-w-full">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left py-2">M√£ ƒêH</th>
                                <th class="text-left py-2">Kh√°ch h√†ng</th>
                                <th class="text-left py-2">T·ªïng ti·ªÅn</th>
                                <th class="text-left py-2">Tr·∫°ng th√°i</th>
                                <th class="text-left py-2">Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="py-2">#001</td>
                                <td class="py-2">Nguy·ªÖn VƒÉn A</td>
                                <td class="py-2">4,500,000ƒë</td>
                                <td class="py-2"><span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">Ch·ªù x·ª≠ l√Ω</span></td>
                                <td class="py-2"><a href="orders.html" class="text-primary hover:underline">Xem</a></td>
                            </tr>
                        </tbody>
                    </table>
                `;
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        loadDashboard();
    </script>
</body>
</html>
